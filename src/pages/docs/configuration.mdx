import { Installer, Shell } from "@/components/docs";

## Plugin Options

- **ignore-functions** - <>{"<string[]>"}</> - Default: **[]**`

  - Ignore tracing for functions with the given names

- **clean** - <>{"<boolean>"}</> - Default: **false**`
  - Ignore all tracing for functions without a name (anonymous functions)

<Shell
  code={[
    "{",
    '  "plugins": [',
    "     [",
    '         "@sliit-foss/babel-plugin-transform-trace"',
    "         {",
    '             "ignore-functions": ["foo", "bar"]',
    '             "clean": true',
    "         }",
    "     ]",
    "  ]",
    "}"
  ]}
/>

<div className="border-docs my-3" /> <a href="#context-setup" />

## Context Setup (Optional)

- The following setup is needed for the plugin to be able to log the **correlation id** accurately
- This feature is currently supported only through the usage of the library **[express-http-context](https://www.npmjs.com/package/express-http-context)**

<Installer library="express-http-context" />

<Shell
  code={[
    "import express from 'express';",
    "import context from 'express-http-context';",
    "",
    "const app = express();",
    "",
    "app.use(context.middleware);",
    "",
    "app.use((req, _res, next) => {",
    "    context.set('correlationId', req.headers[correlationId] ?? crypto.randomBytes(16).toString('hex'));",
    "    next();",
    "});"
  ]}
/>

<div className="border-docs" />

## Upcoming Features

- Annotation based tracing (https://github.com/sliit-foss/npm-catalogue/issues/88)
- Colored logs (https://github.com/sliit-foss/npm-catalogue/issues/90)
